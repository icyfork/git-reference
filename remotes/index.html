---
layout: reference
---

<div class="box">
  <h2>
    <span class="docs">
      <a target="new" href="http://progit.org/book/ch2-5.html">book</a>
    </span>
    Sharing and Updating Projects
  </h2>
  <div class="block">
    <p>
    Git không tập trung dữ liệu mở một máy phục vụ như Subversion. Mà tất
    cả thao tác sẽ cập nhật dữ liệu ngay trên máy tính của bạn. Để cộng tác
    với người khác, bạn phải đẩy dữ liệu lên một máy phục vụ chung mà họ
    có quyền truy cập, và nhờ đó đồng bộ kho lưu trên máy bạn với kho lưu
    trên máy phục vụ. Không có sự khác biệt giữa máy khách và máy phục vụ
    dành cho Git, bởi vì kho lưu trữ ở máy khách đã đồng bộ với kho lưu trữ
    trên máy phục vụ.
    </p>

    <p>
    Môt khi đã có kho lưu trữ Git, hoặc là bạn sẽ thiết lập máy của bạn thành
    một máy phục vụ sử dụng kho đó để chia sẻ, hoặc bạn sẽ tiến hành đồng
    bộ hoặc khảo sát sự khác biệt giữa kho của bạn với kho Git khác bằng
    hai thao tác đẩy và kéo.
    </p>

    <p>
    Thao tác đẩy và kéo được tiến hành bất kỳ khi nào bạn có kết nối mạng
    với kho Git khác, trong khi đó thao tác xác nhận (<code>commit</code>)
    được tiến hành hoàn tòan ở địa phương.</p>

    <p class="nutshell">
    <b>Tóm tắt:</b> bạn lấy các thông tin mới từ kho Git khác về máy của
    bạn bằng lệnh <code>git fetch</code> (thao tác kéo), và chia sẻ những thay đổi do
    bạn thực hiện bằng lệnh <code>git push</code> (thao tác đẩy)).
    Địa chỉ các kho Git của dự án được quản lý nhờ <code>git remote</code>.
    </p>
  </div>
</div>

<div class="box">
  <h2>
    <span class="docs">
      <a target="new" href="http://www.kernel.org/pub/software/scm/git/docs/git-remote.html">docs</a> &nbsp;
      <a target="new" href="http://progit.org/book/ch2-5.html#showing_your_remotes">book</a>
    </span>
    <a name="remote">git remote</a>
    <span class="desc">quản lý địa chỉ các kho Git</span>
  </h2>

  <div class="block">

    <p>Vì Git không dùng một máy phục vụ chung để lưu dữ liệu như Subversion,
    các kho lưu trữ Git bình đẳng nhau, nằm trên các máy khác nhau và nhiệm
    vụ của bạn là đồng bộ những kho này với nhau. Từ đó, nảy sinh ra ý phải
    quản lý các kho cùng với kết nối tới chúng, kể cả phân quyền (đọc với
    kho này, được ghi vào kho kia,...). </p>

    <p>Các kho ở máy phục vụ khác nhau được phân biệt chỉ bằng địa chỉ
    thực, mà bằng bởi tên ngắn gọn mà bạn gán cho địa chỉ đó. Như vậy,
    việc sử dụng các kho sẽ dễ nhớ, đơn giản hơn rất nhiều.You use the
    <code>git remote</code> command to manage this list of remote repos that
    you care about.</p>

    <h4>
      git remote
      <small>liệt kê tên của các kho ở xa</small>
    </h4>

    <p>Khi dùng không có tham số, lệnh <code>git remote</code> liệt kê
    các tên của các địa chỉ kho ở xa đã biết. Mặc định, địa chỉ kho đầu tiên
    khi bạn vừa thực hiện lệnh nhân bản một kho sẽ có tên 'origin' (gốc).
    Khi có thêm tham số <code>-v</code>, ngoài tên của kho thì địa chỉ
    của kho cũng được in ra.</p>

<pre>
<b>$ git remote</b>
origin
<b>$ git remote -v</b>
origin	git@github.com:schacon/git-reference.git (fetch)
origin	git@github.com:schacon/git-reference.git (push)
</pre>

    <p>Ở ví dụ trên, địa chỉ kho được liệt kê hai lần, bởi vì Git phân biệt
    địa chỉ kho để kéo và đẩy.</p>

    <h4>
      git remote add
      <small>thêm một kho cho dự án</small>
    </h4>

    <p>Ta có thể thêm nhiều địa chỉ kho khác nhau cho dự án, bằng lệnh
    <code>git remote add [tên] [địa chỉ]</code>. Ở đây, '[tên]' là do bạn
    chọn để gợi nhớ, đại diện cho địa chỉ của kho (thường dài dòng khó nhớ).</p>

    <p>Lấy ví dụ, bạn muốn chia sẻ chương trình Hello World với mọi người
    bằng cách đẩy nó lên GitHub (dịch vụ khác cũng tương tự), trước hết
    bạn tạo dự án ở GitHub, có tên là <b>hw</b>. Địa chỉ kho mà dịch vụ
    GitHub cung cấp cho dự án là "git@github.com:schacon/hw.git" (trong đó,
    @schacon@ được thay bởi tên của bạn ở GitHub). Ta sẽ thêm địa chỉ kho
    này cho dự án, với tên kho là 'github':</p>

<pre>
<b>$ git remote</b>
<b>$ git remote add github git@github.com:schacon/hw.git</b>
<b>$ git remote -v</b>
github	git@github.com:schacon/hw.git (fetch)
github	git@github.com:schacon/hw.git (push)
</pre>

    <p>Ở tên tên của kho được chọn là 'github', có lẽ là một tên gợi nhớ;
    thực tế thì cũng như các nhánh, bạn có thể chọn tên bất kỳ nào cho
    địa chỉ của kho.
    </p>

    <h4>
      git remote rm
      <small>bỏ đi một địa chỉ kho</small>
    </h4>

    <p>Lệnh <code>git remote rm [tên kho]</code> sẽ bỏ đi một kho không
    còn phù hợp với dự án (nếu bạn muốn giữ nguyên địa chỉ kho và đổi tên
    kho thì hãy dùng <code>git remote rename</code></p>

<pre>
<b>$ git remote -v</b>
github	git@github.com:schacon/hw.git (fetch)
github	git@github.com:schacon/hw.git (push)
<b>$ git remote add origin git://github.com/pjhyett/hw.git</b>
<b>$ git remote -v</b>
github	git@github.com:schacon/hw.git (fetch)
github	git@github.com:schacon/hw.git (push)
origin	git://github.com/pjhyett/hw.git (fetch)
origin	git://github.com/pjhyett/hw.git (push)
<b>$ git remote rm origin</b>
<b>$ git remote -v</b>
github	git@github.com:schacon/hw.git (fetch)
github	git@github.com:schacon/hw.git (push)
</pre>

    <p class="nutshell">
    <b>Tóm tắt:</b> với <code>git remote</code> bạn xem được danh sách
    tên các kho ở xa cùng địa của kho. Lệnh <code>git remote add</code>
    dùng để thêm kho mới, còn <code>git remote rm</code> dùng để xóa đi.
    </p>

  </div>
</div>

<div class="box">
  <h2>
    <span class="docs">
      <a target="new" href="http://www.kernel.org/pub/software/scm/git/docs/git-fetch.html">docs</a> &nbsp;
      <a target="new" href="http://progit.org/book/ch2-5.html#fetching_and_pulling_from_your_remotes">book</a>
    </span>
    <a name="fetch">git fetch</a>
    <span class="desc">tải dữ liệu của nhánh ở xa về máy</span>
  </h2>

  <br/>

  <h2>
    <span class="docs">
      <a target="new" href="http://www.kernel.org/pub/software/scm/git/docs/git-pull.html">docs</a> &nbsp;
      <a target="new" href="http://progit.org/book/">book</a>
    </span>
    <a name="pull">git pull</a>
    <span class="desc">tải dữ liệu của nhánh ở xa về máy và thực hiện trộn</span>
  </h2>

  <div class="block">

    <p>Sau khi thêm kho ở xa, thì tự nhiên dẫn tới nhu cầu cập nhật dữ
    liệu ở nhánh xa về máy tính của bạn. Git có hai lệnh cho nhu cầu này:
    Lệnh <code>git fetch</code> sẽ giúp thông tin trên máy của bạn cập nhật
    so với nhánh ở xa, bằng cách tải thông tin từ kho xa về (chỉ tải những
    thông tin chưa có trên máy bạn) và đánh dấu để bạn biết bạn đã đồng
    bộ dữ liệu với nhánh nào trên kho xa. Cách này còn gọi là "nhánh xa",
    bởi vì sau khi cập nhật về, Git để nguyên đó mà không lấy ra và thay thế
    các nội dung đang có trong thư mục làm việc. Việc dùng <code>git fetch</code>
    giúp bạn kiểm tra các thay đổi, so sánh và thậm chí trộn các thay đổi
    ở xa với thư mục làm việc của bạn.
    </p>

    <p>Lệnh thứ hai để đồng bộ là <code>git pull</code>. Thực ra, lệnh này
    là một cách gộp: đầu tiên, Git thi hành <code>git fetch</code> để
    cập nhật thông tin từ xa xuống máy, rồi ngay sau đó tiến hành trộn
    nhờ lệnh <code>git merge</code> (việc trộn này chỉ diễn ra với nhánh
    mà bạn đang làm việc). Một cách cá nhân, tác giả không thích lệnh này,
    bởi nó không thật sự an toàn, bởi tốt nhất là chỉ nên trộn sau khi đã
    kiểm tra, so sánh kỹ. Tuy nhiên, việc dùng <code>git pull</code>
    cũng có cái hay mà bạn có thể tìm hiểu thêm ở
    <a target="new" href="http://www.kernel.org/pub/software/scm/git/docs/git-pull.html">tài liệu chính thức</a>.
    </p>

    <p>Bây giờ, đi vào chi tiết. Giả sử các kho ở xa đã được thiết lập và
    bạn muốn kéo thông tin từ xa về máy: bạn sẽ dùng lệnh <code>git fetch [tên kho]</code>.
    Sau đó, bạn có thể trộn bằng <code>git merge [tên khoa]/[tên nhánh]</code>.
    Chẳng hạn, khi đang thực hiện dự án Hello World, thấy có ai đó đã sửa
    đổi cho dự án này, và bạn muốn kéo các thay đổi của họ về máy, thì
    các lệnh sẽ dùng như sau:</p>

<pre>
<b>$ git fetch github</b>
remote: Counting objects: 4006, done.
remote: Compressing objects: 100% (1322/1322), done.
remote: Total 2783 (delta 1526), reused 2587 (delta 1387)
Receiving objects: 100% (2783/2783), 1.23 MiB | 10 KiB/s, done.
Resolving deltas: 100% (1526/1526), completed with 387 local objects.
From github.com:schacon/hw
   8e29b09..c7c5a10  master     -> github/master
   0709fdc..d4ccf73  c-langs    -> github/c-langs
   6684f82..ae06d2b  java       -> github/java
 * [new branch]      ada        -> github/ada
 * [new branch]      lisp       -> github/lisp
</pre>

    <p>Thông tin ở trên cho biết, kể từ lần đồng bộ cuối cùng, đã có
    5 nhánh được thêm hoặc cập nhật vào kho xa: hai nhánh 'ada' v 'lisp'
    là hoàn tòan mới, các nhánh còn lại 'master', 'c-langs' và 'java' được cập nhật.
    </p>

    <p>You can see the mapping that Git makes.  The 'master' branch on the remote
    repository becomes a branch named 'github/master' locally.  That way now I can
    merge the 'master' branch on that remote into my local 'master' branch by running
    <code>git merge github/master</code>.  Or, I can see what new commits are on that
    branch by running <code>git log github/master ^master</code>.  If your remote
    is named 'origin' it would be <code>origin/master</code> instead.  Almost any
    command you would run using local branches you can use remote branches with too.
    </p>

    <p>If you have more than one remote repository, you can either fetch from specific
    ones by running <code>git fetch [alias]</code> or you can tell Git to syncronize
    with all of your remotes by running <code>git fetch --all</code>.

    <p class="nutshell">
    <b>In a nutshell</b> you run <code>git fetch [alias]</code> to syncronize your
    repository with a remote repository, fetching all the data it has that you do
    not into branch references locally for merging and whatnot.
    </p>

  </div>

</div>

<div class="box">
  <h2>
    <span class="docs">
      <a target="new" href="http://www.kernel.org/pub/software/scm/git/docs/git-push.html">docs</a> &nbsp;
      <a target="new" href="http://progit.org/book/ch2-5.html#pushing_to_your_remotes">book</a>
    </span>
    <a name="push">git push</a>
    <span class="desc">push your new branches and data to a remote repository</span>
  </h2>

  <div class="block">
    <p>To share the cool commits you've done with others, you need to push your
    changes to the remote repository. To do this, you run
    <code>git push [alias] [branch]</code> which will attempt to make your [branch]
    the new [branch] on the [alias] remote. Let's try it by initially pushing
    our 'master' branch to the new 'github' remote we created earlier.</p>

<pre>
<b>$ git push github master</b>
Counting objects: 25, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (25/25), done.
Writing objects: 100% (25/25), 2.43 KiB, done.
Total 25 (delta 4), reused 0 (delta 0)
To git@github.com:schacon/hw.git
 * [new branch]      master -> master
</pre>

    <p>Pretty easy. Now if someone clones that repository they will get exactly
    what I have committed and all of it's history.</p>

    <p>What if I have a topic branch like the 'erlang' branch we created earlier
    and I just want to share that?  You can just push that branch instead.

<pre>
<b>$ git push github erlang</b>
Counting objects: 7, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 652 bytes, done.
Total 6 (delta 1), reused 0 (delta 0)
To git@github.com:schacon/hw.git
 * [new branch]      erlang -> erlang
</pre>

    <p>Now when people clone or fetch from that repository, they'll get a 'erlang'
    branch they can look at and merge from. You can push any branch to any
    remote repository that you have write access to in this way. If your branch
    is already on the server, it will try to update it, if it is not, Git will
    add it.</p>

    <p>The last major issue you run into with pushing to remote branches is the
    case of someone pushing in the meantime.  If you and another developer clone
    at the same time, you both do commits, then she pushes and then you try to
    push, Git will by default not allow you to overwrite her changes.  Instead,
    it basically runs <code>git log</code> on the branch you're trying to push and
    makes sure it can see the current tip of the servers branch in your pushes
    history.  If it can't see what is on the server in your history, it concludes
    that you are out of date and will reject your push.  You will rightly have to
    fetch, merge then push again - which makes sure you take her changes into
    account.</p>

    <p>This is what happens when you try to push a branch to a remote branch
    that has been updated in the meantime:</p>

<pre>
<b>$ git push github master</b>
To git@github.com:schacon/hw.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:schacon/hw.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details.
</pre>

    <p>You can fix this by running <code>git fetch github; git merge github/master</code>
    and then pushing again.

    <p class="nutshell">
    <b>In a nutshell</b> you run <code>git push [alias] [branch]</code> to update a
    remote repository with the changes you've made locally.  It will take what your
    [branch] looks like and push it to be [branch] on the remote, if possible.  If
    someone else has pushed since you last fetched and merged, the Git server will
    deny your push until you are up to date.
    </p>

  </div>
</div>

<p><a href="/inspect">On to Inspection and Comparison &#187;</a></p>
